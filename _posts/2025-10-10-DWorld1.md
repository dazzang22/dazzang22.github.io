---
layout: single
title: "Get ready for Dazzang2 World"
categories: [Unity]
tags: [Unity]   
toc: true
classes: wide
---



다짱이를 전시할 뼈대를 잡아보도록 하자.
할 줄 아는게 Unity 뿐이라 쩔 수가 없네 ;;

```c#
using System.Collections;
using UnityEngine;
using UnityEngine.Networking;

public class LPPlayer : MonoBehaviour
{
    public AudioSource audioSource;
    public string audioUrl;

    public void PressPlayBtn()
    {
        if (audioSource != null)
        {
            audioSource.Play();
        }
    }

    public void PlaySong()
    {
        StartCoroutine(LoadAndPlay());
    }

    IEnumerator LoadAndPlay()
    {
        using (UnityWebRequest req = UnityWebRequestMultimedia.GetAudioClip(audioUrl, AudioType.MPEG))
        {
            yield return req.SendWebRequest();
            if (req.result == UnityWebRequest.Result.Success)
            {
                audioSource.clip = DownloadHandlerAudioClip.GetContent(req);
                audioSource.Play();
            }
        }
    }
}

```

해당 namespace 는 네트워크 통신 기능을 제공한다고 한다.  
`UnityWebRequest` : instance 생성자  
class 종류 중 `UnityWebRequestMultimedia`에 대해 알아보자  

HTTP GET을 통해 오디오 클립을 다운로드하는 UnityWebRequest를 생성하고, 검색된 데이터를 기반으로 AudioClip을 생성handa.

{: .notice--primary}

To send a web request from a `UnityWebRequest` instance, call `UnityWebRequest.SendWebRequest`

그럼 생성한 instance 에 전송 결과가 저장된다!

여기까지가 뼈대고 이제 진짜 기능 추가해보자

### 랜덤으로 곡 뽑기 기능 추가 

일단 곡 정보를 변수 따로따로관리하면 안좋은거알지?  
바로 class 로 만들어줬다

```c#
 [System.Serializable] public class Track
 {
     public string title;
     public string artist;
     public string url;
 }
public Track[] allTracks;
```

이렇게 제목, 아티스트명, url 을 class로 관리합시더.  
그리고 그 instance들을 array 로 관리합시더.  
그리하여 랜덤 기능을 도입 => 배열의 인덱스를 랜덤 추출하여 배열에 접근하는 방식  

```c#
public void PlayRandomSong()
{
	int i = Random.Range(0, allTracks.Length);
	StartCoroutine(LoadAndPlayByIndex(i));
}
```

코루틴 호출에서

`var t = allTracks[i];` 이런식으로 인스턴스 생성했듬~
